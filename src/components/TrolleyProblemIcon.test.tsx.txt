import "@testing-library/jest-dom";
import { render } from "@testing-library/react";
import TrolleyProblemIcon from "./TrolleyProblemIcon";
import { PositionEnum } from "../type";

describe("TrolleyProblemIcon", () => {
  it("renders SVG element", () => {
    const { container } = render(
      <TrolleyProblemIcon
        trolleyPosition={PositionEnum.A}
        leverPosition={PositionEnum.A}
      />
    );
    expect(container.querySelector("svg")).toBeInTheDocument();
  });

  it("renders lever at correct position for A", () => {
    const { container } = render(
      <TrolleyProblemIcon
        trolleyPosition={PositionEnum.A}
        leverPosition={PositionEnum.A}
      />
    );
    const circle = container.querySelector("circle");
    expect(circle).toHaveAttribute("cy", "150");
  });

  it("renders lever at correct position for B", () => {
    const { container } = render(
      <TrolleyProblemIcon
        trolleyPosition={PositionEnum.B}
        leverPosition={PositionEnum.B}
      />
    );
    const circle = container.querySelector("circle");
    expect(circle).toHaveAttribute("cy", "220");
  });

  it("uses setIsAnimating prop if provided", () => {
    const setIsAnimating = jest.fn();
    render(
      <TrolleyProblemIcon
        trolleyPosition={PositionEnum.A}
        leverPosition={PositionEnum.A}
        setIsAnimating={setIsAnimating}
      />
    );
    // No direct call, but prop is accepted and passed down
    expect(typeof setIsAnimating).toBe("function");
  });
});
